üß© Prop√≥sito General
Desarrolla una aplicaci√≥n web robusta y escalable usando Python (Flask) con base de datos MySQL y un frontend responsive (Bootstrap o similar). Esta aplicaci√≥n gestionar√° ventas diarias, control de pedidos, extras, devoluciones, comisiones por categor√≠a, proyecciones mensuales, y reportes filtrables por vendedor, todo con seguridad por roles y trazabilidad de datos.

Se reutilizar√° lo ya desarrollado en la aplicaci√≥n de control de canastas (estructura base, control por c√≥digo de barras, roles, frontend adaptado a m√≥viles, flujo de registro y movimientos).

üë• Roles de Usuario
Administrador

Acceso completo.

CRUD de productos (precio y categor√≠a: panader√≠a o bizcocher√≠a).

CRUD de vendedores (incluyendo % comisi√≥n por categor√≠a).

Puede modificar pedidos, extras y devoluciones si a√∫n no se han usado.

Visualiza panel resumen, reportes globales y por vendedor.

Exporta informes en PDF/Excel.

Define d√≠as h√°biles del mes y puede excluir festivos espec√≠ficos.

Reasignar o anular documentos err√≥neos.

Semiadministrador (Despachos)

Puede generar ventas.

Visualiza historial de todos los vendedores.

Accede al panel resumen.

Sin permisos de edici√≥n ni eliminaci√≥n de productos o vendedores.

Vendedor

Registra sus pedidos, extras y devoluciones.

Consulta su historial.

Visualiza:

Ventas del mes

Proyecci√≥n mensual

Comisi√≥n acumulada

Canastas prestadas (de la app existente)

Descarga sus reportes en PDF.

üõí Productos
Gestionados solo por el Administrador.

Cada producto incluye:

C√≥digo

Nombre

Precio

Categor√≠a (panader√≠a o bizcocher√≠a)

Estado (activo/inactivo)

üì¶ Documentos: Pedidos / Extras / Devoluciones
Ingreso por formularios din√°micos (con m√∫ltiples productos).

Cada documento incluye:

C√≥digo (con prefijo tipo: PD, EX, DV)

Fecha

Vendedor

Comentarios

Estado (pendiente, usado, anulado)

Productos (en formato JSON o tabla relacional)

Restricciones:

Pedido y extra se usan una sola vez.

Devoluci√≥n puede usarse m√°ximo dos veces: anterior (suma) y actual (resta).

Toda operaci√≥n debe coincidir con el mismo vendedor.

üßÆ Generaci√≥n de Venta
Realizada por Admin o Semiadmin.

Datos requeridos:

Fecha

Vendedor

C√≥digo de pedido

Devoluci√≥n anterior

Extras

Devoluci√≥n del d√≠a

F√≥rmula:

python
Copiar
Editar
Venta del d√≠a = Devoluci√≥n anterior + Pedido + Extras ‚àí Devoluci√≥n del d√≠a
Por producto:

Categor√≠a

Subtotal

% Comisi√≥n seg√∫n categor√≠a

Comisi√≥n total

Total a pagar a panader√≠a

Confirmaci√≥n:

Marca documentos como usados

Guarda venta en BD_VENTAS, con precios y % comisi√≥n aplicados (por trazabilidad)

üí∞ Comisi√≥n por Categor√≠a
Cada vendedor tiene % individual por categor√≠a (panader√≠a / bizcocher√≠a).

Usado para c√°lculo autom√°tico de comisiones por producto.

üìà Proyecci√≥n de Ventas
python
Copiar
Editar
Proyecci√≥n = (Ventas acumuladas / D√≠as h√°biles transcurridos) √ó Total d√≠as h√°biles del mes
Admin define d√≠as h√°biles (con opci√≥n para excluir festivos).

Proyecci√≥n se actualiza autom√°ticamente.

üìã Informes y Paneles
Panel Admin/Semiadmin:

Tabla resumen por vendedor:

Total vendido

Comisi√≥n ganada

Proyecci√≥n mensual

Filtros por mes, rango o vendedor

Reportes exportables:

Excel (editable)

PDF (media carta, con logo, estilo claro)

Por producto, categor√≠a, vendedor o fecha

üîí Seguridad y Trazabilidad
Autenticaci√≥n por rol

Accesos y vistas restringidas

Tabla de auditor√≠a:

Qui√©n modific√≥

Qu√© documento

Qu√© cambi√≥

Fecha y hora

Las ventas guardan precios y % comisi√≥n en ese momento (evita errores por cambios futuros)

üì± Interfaz y Accesibilidad
Bootstrap o similar

Mobile-first para vendedores

Versi√≥n de escritorio para administraci√≥n

Flujo adaptado para lector de c√≥digo de barras (ya implementado en canastas)

üîÑ Reutilizaci√≥n del M√≥dulo de Canastas
Integraci√≥n total del sistema de control de canastas ya construido.

Reporte al final del d√≠a por vendedor.

Historial de canastas prestadas/de vueltas.

Escaneo por c√≥digo de barras autom√°tico.

Registro autom√°tico de nuevos c√≥digos si son v√°lidos.

üîî Extras sugeridos (futuros)
Notificaci√≥n autom√°tica diaria si el vendedor no registra pedido antes de cierta hora.

Firma digital en reportes PDF.

Env√≠o autom√°tico de reporte semanal/mensual por correo al vendedor.